# Set up the markets
runtime: yaml
name: test-aws
description: A place for veggie growers to sell their produce.
packages:
  pulumi-shopkeeper:
    source: ../../../../../pulumi-shopkeeper
    version: 0.0.0
resources:
  vegProd:
    type: pulumi-shopkeeper:AwsMarketV1
    properties:
      name: VegMarketProd
      description: Vegmarket (Prod)
      bucketPrefix: pytest-aws-veg-market
outputs:
  someMarketData: ${vegProd.marketData}
  someMarketConfiguration: ${vegProd.marketConfiguration}
  # workaround: bug: yaml stack references can't dereference map outputs.
  bucket: ${vegProd.marketData["bucket"]}
  region: ${vegProd.marketData["region"]}
  market_metadata_key: ${vegProd.marketData["marketMetadataKey"]}