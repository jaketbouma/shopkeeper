# Set up the markets
runtime: yaml
name: pytest-aws-veg-market-producer
description: Pete deploys all his pumpkins from here.
packages:
  pulumi-shopkeeper:
    source: ../../../../pulumi-shopkeeper
    version: 0.0.0
resources:
  # Reference the market stack
  marketStackRef:
    type: pulumi:pulumi:StackReference
    properties:
      name: pytest-aws-veg-market # adjust if your stack name differs

  # Producer
  prod:
    type: pulumi-shopkeeper:AwsProducerV1
    properties:
      name: "Pete the Pumpkin Producer"
      description: Pumpkin Market (Prod)
      market: ${marketStackRef.outputs.vegMarketConfiguration}
outputs:
  peteData: ${prod.producerData}